<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>לוח שנה עברי-לועזי</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=David+Libre:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-controls">
                <button id="toggleCalendar" class="control-btn">לועזי עברי</button>
                <button id="todayBtn" class="control-btn">היום</button>
                <button id="settingsBtn" class="control-btn">הגדרות</button>
            </div>
            <div class="month-controls">
                <div class="year-display">
                    <button id="prevYear" class="nav-btn">▶</button>
                    <h2 id="currentYear" class="clickable"></h2>
                    <button id="nextYear" class="nav-btn">◀</button>
                    <div class="year-input-container hidden">
                        <input type="text" id="yearInput" class="year-input">
                        <div class="input-buttons">
                            <button class="apply-btn">✓</button>
                            <button class="cancel-btn">✗</button>
                        </div>
                    </div>
                </div>
                <div class="month-navigation">
                    <button id="prevMonth" class="nav-btn">▶</button>
                    <h2 id="currentMonth" class="clickable"></h2>
                    <button id="nextMonth" class="nav-btn">◀</button>
                    <select id="monthSelect" class="month-select hidden"></select>
                </div>
            </div>
        </header>

        <div class="calendar-grid">
            <div class="weekdays">
                <div>ראשון</div>
                <div>שני</div>
                <div>שלישי</div>
                <div>רביעי</div>
                <div>חמישי</div>
                <div>שישי</div>
                <div>שבת</div>
            </div>
            <div id="daysGrid" class="days"></div>
        </div>

        <!-- Modal for day details -->
        <div id="dayModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3 id="modalDate"></h3>
                <div id="modalEvents"></div>
                <div id="modalZmanim"></div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>הגדרות</h2>
                <form id="settingsForm">
                    <!-- גודל טקסט -->
                    <div class="settings-group">
                        <h3>גודל טקסט</h3>
                        <select name="fontSize">
                            <option value="small">קטן</option>
                            <option value="medium">בינוני</option>
                            <option value="large">גדול</option>
                        </select>
                    </div>

                    <!-- צבע נושא -->
                    <div class="settings-group">
                        <h3>צבע נושא</h3>
                        <select name="themeColor">
                            <option value="blue">כחול</option>
                            <option value="green">ירוק</option>
                            <option value="orange">כתום</option>
                        </select>
                    </div>

                    <!-- הצגת אירועים -->
                    <div class="settings-group">
                        <h3>אירועים</h3>
                        <label>
                            <input type="checkbox" name="showEvents">
                            הצג אירועים בלוח השנה
                        </label>
                    </div>

                    <!-- זמני היום -->
                    <div class="settings-group">
                        <h3>זמני היום</h3>
                        
                        <!-- עלות השחר -->
                        <div class="setting-item">
                            <label>עלות השחר:</label>
                            <select name="dawnType">
                                <option value="72">72 דקות לפני הנץ</option>
                                <option value="90">90 דקות לפני הנץ</option>
                            </select>
                        </div>

                        <!-- צאת הכוכבים -->
                        <div class="setting-item">
                            <label>צאת הכוכבים:</label>
                            <select name="tzeitType">
                                <option value="14">14 דקות אחרי שקיעה</option>
                                <option value="22.5">22.5 דקות אחרי שקיעה</option>
                                <option value="24">24 דקות אחרי שקיעה</option>
                            </select>
                        </div>

                        <!-- מוצאי שבת -->
                        <div class="setting-item">
                            <label>מוצאי שבת:</label>
                            <select name="shabbatEndType">
                                <option value="regular">זמן רגיל</option>
                                <option value="hazon">חזון איש</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit">שמור הגדרות</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="toast"></div>

    <script type="module" src="app.js"></script>
    <script type="module">
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
